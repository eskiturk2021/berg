# Telegram Бот с интеграцией OpenAI Assistant

Этот проект представляет собой Telegram бота, который использует OpenAI Assistant для ответов на вопросы пользователей о здоровом питании и образе жизни. Бот сохраняет историю разговоров для каждого пользователя и может предоставить эту историю по запросу.

## Основные функции

1. Интеграция с OpenAI Assistant для обработки запросов пользователей.
2. Сохранение истории разговоров для каждого пользователя в отдельный файл.
3. Возможность просмотра истории разговоров.
4. Использование базы данных SQLite для дополнительного хранения сообщений.

## Технические детали

- Язык программирования: Python
- Используемые библиотеки:
  - openai
  - python-telegram-bot
  - python-dotenv
  - sqlite3

## Настройка и запуск

1. Установите необходимые зависимости:
   ```
   pip install -r requirements.txt
   ```

2. Создайте файл `.env` в корневой директории проекта и добавьте следующие переменные:
   ```
   OPENAI_API_KEY=your_openai_api_key
   TELEGRAM_TOKEN=your_telegram_bot_token
   ASSISTANT_ID=your_openai_assistant_id
   ```

3. Запустите бота:
   ```
   python main.py
   ```

## Основные команды бота

- `/start` - начать разговор с ботом
- `/history` - получить историю разговоров

## Структура проекта

- `main.py` - основной файл с логикой бота
- `requirements.txt` - список зависимостей
- `user_conversations.db` - база данных SQLite для хранения сообщений
- `conversation_{user_id}.txt` - файлы с историей разговоров для каждого пользователя

## Последние изменения

1. Интеграция OpenAI Assistant вместо прямых запросов к chat.completions.
2. Добавление функции сохранения разговоров в отдельные файлы для каждого пользователя.
3. Обновление функции получения истории разговоров для чтения из файла.
4. Сохранение времени каждого сообщения в истории разговоров.

## Планы на будущее

- Добавление возможности очистки истории разговоров
- Улучшение обработки ошибок и повторных попыток при сбоях API
- Реализация более продвинутых функций анализа диалога

## Вклад в проект

Если у вас есть предложения по улучшению бота или вы нашли ошибку, пожалуйста, создайте issue или отправьте pull request.

